# **第3部分**    **处理机调度与死锁**

学习重点：

##### 1、作业及作业的状态：

​	提交状态、后备状态、运行状态、完成状态。

 

##### ==2、三级调度：==

​	作业调度（高级调度）：用于决定把**外存**上处于后备队列中的哪些**作业调入内存**，并为它们创建进程、分配必要的资源，排在就绪队列上。
​	==作业调度的过程是当用户提交一个作业准备执行作业先进入到后备作业队列中等待，然后由作业调度算法选择一个作业，为作业创建进程，申请PCB，放入就绪队列等待调度。==

​	内存调度（中级调度）：引入中级调度的原因是==为了提高内存利用率和系统吞吐量(如果作业内存不足就需要对换)，从外存将数据调入到内存==，引入了中级调度。

​	进程调度（低级调度）：从就绪队列中选择一个**进程**来执行并**分配处理机**。
​	==进程调度的过程是从就绪队列中按照一定的算法选择一个进程分配处理及和必要的资源执行==

 

##### 3、进程调度的两种方式：

​	**抢占式调度、非抢占式调度**（剥夺式调度和非剥夺式调度）。

 

##### 4、调度算法(衡量不同进程调度算法的优劣)：

​	会用下面前5种调度算法计算==作业调度次序和作业的平均周转时间(系统吞吐量/资源利用率)、平均带权周转时间==。（注意若特别指出：全部到达就绪队列后开始调度，或者没有特别指出；二者不同）

​	a)  **先来先服务调度法**（FCFS）：==只考虑作业的到达时间==
​	b)  **短作业/短进程优先调度算法**（SJF/SPF，分为剥夺式和非剥夺式，剥夺式短进程优先调度算法又叫最短剩余时间优先调度算法SRT）：==只考虑服务时间==
​	c)  **时间片轮转调度法**（RR）
​	d)  **高优先权优先调度算法**
​	e)  **高响应比优先调度算法**（HRRN）：特点是优先级高的被调度==P98==，响应比与等待时间有关(==同时考虑到达时间和服务时间==)
​	f)  **多级反馈队列调度算法**（**为什么说多级反馈队列调度算法能较好地满足各方面用户的需求？P104**）

 

##### **5**、(时间片轮转法)RR调度算法中时间片的确定：

​	==一般用于分时系统==
​	时间片应**略大于一次典型的交互需要的时间**。
​	一般考虑三个因素：系统对相应时间的要求、就绪队列中进程的数目和系统的处理能力。



##### 6、评价调度算法的指标：

​	吞吐量、周转时间、**平均周转时间、平均等待时间、**带权周转时间和**平均带权周转时间**。



##### **7**、什么是死锁，**产生死锁的原因和四个必要条件。**

​	**多个进程在运行过程中等待被其他进程占用而不能被释放的资源，这种因争夺资源而造成的一种僵局，称为死锁**

​	==**产生死锁的原因**：系统资源不足、进程推进顺序不当、竞争消耗性资源==

​	==**四个必要条件**：互斥条件（资源独占条件）、请求和保持条件（忙等，部分分配条件）、不可抢占资源（不剥夺条件）、循环等待条件（环路条件）==



##### ==8、处理死锁的四种方法：==

​	预防死锁：设置限制条件，破坏产生死锁的3个必要条件（互斥条件不能破坏）
​	避免死锁：防止系统进入不安全状态，==银行家算法==
​	检测死锁：资源分配图(==进程、资源、请求/分配==，所有的边都能消掉就说明没有死锁)
​	解除死锁：剥夺（回收）资源，终止（撤销）进程



##### 9、死锁预防的基本思想和可行的解决办法

​	从产生死锁的四个必要条件出发，去破坏第2、3、4个必要条件：例如采用资源按序分配策略来破坏环路等待；



##### 10、什么是进程的安全序列，死锁与安全序列的关系，安全状态、不安全状态和死锁状态之间的关系。

​	当系统处于安全状态时，可以避免发生死锁；反之，当系统处于不安全状态时，可能进入死锁。
​	一旦系统进入死锁状态，系统一定是不安全的。



##### 11、死锁避免与银行家算法

​	**避免死锁的实质在于**：系统在进行资源分配的时候，应**使系统始终处于安全状态**

​	会用银行家算法判断**某一时刻系统状态是否安全**以及**当某进程提出资源请求时能否分配**（当一个进程提出的资源请求将导致系统从安全状态进入不安全状态时，系统就拒绝它的资源请求，让它等待）。



##### 12、死锁的检测和解除

​	死锁检测：资源分配图（方框和圆圈）——无环路一定不存在死锁（有则不一定）

​	死锁定理——死锁状态的充分条件是，当且仅当资源分配图是不可化简的（所有进程结点都为孤立结点）

​	死锁解除：暴力抢占资源，撤销死锁进程以打破循环环路