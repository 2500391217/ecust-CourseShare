## **第6部分**    **文件管理**

学习重点：

##### 1. 文件、文件系统（指文件、管理文件的软件及数据结构的总体）的概念。



##### 2. 文件的==逻辑结构==：

==**从用户的角度**所看到的文件组织==（即文件的组织方式），分为：
	有结构文件（==记录式==文件—顺序结构、索引结构、索引顺序结构，P247）（==上课只讲了这里==）
	无结构文件（==流式==文件）；UNIX操作系统中文件的逻辑结构是流式文件。



##### 3. 文件的==物理结构==（连续、离散）
（文件==在外存上的实际存放形式==，即外存的分配方式，分配存储空间的基本单位是块）及各自的特点：

​	连续分配形成顺序文件（不便于文件的扩充）
​	链接分配形成链接文件（隐式链接和显示链接即FAT表-会画图，==不支持随机存取，所以引入索引文件==）
​	索引分配形成索引文件（一级索引分配、多级索引分配、混合索引分配方式—会计算采用混合索引分配方式的文件系统所能支持的单个文件的最大长度并能画出混合索引分配结构示意图）。

​	==用户对文件的存取方式有**顺序**和**随机**。==



##### 4. ==顺序文件(数组,定长记录顺序结构)可==顺序存取和直接存取（==随机存取==）；

​	==**链接**文件只能**顺序存取（链表只能顺着读）**==（隐式链接，显式链接-文件分配表）；（==**不定长记录只能顺序存取**，**所以不定长文件通常采用索引结构实现随机存取**==）
​	==**索引**文件支持**随机存取**==（**不定长且能随机存取**，索引表）；

​	隐式链接不支持随机存取，显式链接(放在内存的FCT)支持随机存取，不说默认隐式链接。



##### 5. UNIX操作系统（分时操作系统）所采用的外存分配方式（文件的物理结构）：

​	混合索引分配方式（能够画图）、
​	对空闲块的管理采用成组链接法。



##### 6. 目录（文件系统通过目录来管理文件，文件的目录通常存放在外存中）和目录结构：

​	目录本质上是一个文件，文件里面是一条一条的目录项，一条记录实际上就是一个文件的文件控制块FCB，它记录着这个目录下文件的相关信息；==(二级)目录解决了重名的问题==

​	目录项（一个FCB）
​	因为查找起来不方便所以对FCB进行瘦身，把除了文件名之外的内容都放到了==**索引结点**==（即i结点），就可以==先在目录文件中按照文件名查找到i节点，然后把i节点调到内存找到i节点当中的外存地址，再到磁盘上取出数据。==
​	目录结构—单级目录结构
​	两级目录结构（解决不同用户文件重名的问题）
​	多级目录结构（树型目录结构）



##### 7. 文件的共享：(考试不考)

​	基于索引结点的共享方式、利用符号链(快捷方式)实现文件共享。在本地磁盘上拷贝文件到本地磁盘是很快的，实际上是创建了不同的文件名但指向同一个索引节点



##### 8. 文件存储空间的管理：

​	空闲表法、空闲链法、位示图法、成组链接法（UNIX操作系统所采用的文件存储空间管理的方法）。



##### 9. 对文件和目录的主要操作。

​	从外存拷贝到内存的打开文件表的一个表目
​	然后把表目的编号/索引号（文件描述符）给用户
​	相当于用户和指定文件之间建立了链接，下一次不用检索就可以找到
​	关闭就是把表目删除



![](%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%8C%87%E5%AF%BC_%E5%85%AD_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/image-20231224160552105.png)

![](%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%8C%87%E5%AF%BC_%E5%85%AD_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/image-20231224144859052.png)

![](%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%8C%87%E5%AF%BC_%E5%85%AD_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/image-20231224153354003.png)

![](%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0%E6%8C%87%E5%AF%BC_%E5%85%AD_%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/image-20231224155500145.png)
